<script>
$(".nav").find(".active").removeClass("active");
$(".nav-statistics").addClass("active");
</script>

<!-- Include Date Range Picker -->
<script src="/js/moment.min.js"></script>
<script src="/js/daterangepicker.js"></script>
<link rel="stylesheet" type="text/css" href="/css/daterangepicker.css" />

<script src="/js/statistics.js"></script>


<form class="form-inline" role="form" id="query_form">
<div class="row">
  <div class="form-group">
    <label for="select_quarter" class="main">Hurtigvelger:</label>
    <select class="quickpick" id="select_quarter">
      <option value="1" selected>1. kvartal</option>
      <option value="2">2. kvartal</option>
      <option value="3">3. kvartal</option>
      <option value="4">4. kvartal</option>
      <option value="5">2. tertial</option>
      <option value="6">Hele</option>
    </select>

    <select class="quickpick" id="select_year">
      <% for year in 2016..Time.now.strftime("%Y").to_i %>
      <%= " <option value='#{year}'>#{year}</option> " %>
      <% end %>
    </select>
  </div>
</div>


<div class="row">
  <div class="form-group">
    <label for="daterange_from" class="main">Periode:</label>
    <input type="text" id="daterange_from" class="period" name="from_date">
    <input type="text" id="daterange_to" class="period" name="to_date">
    <input type="text" id="period_name">
  </div>
</div>

<div class="row">
  <div class="form-group">
    <label for="branch_selector" class="main">Sted:</label>
    <select id="branch_selector" name="branch_id">
      <option value="sum_all">Samlet</option>
      <option value="iterate_all">Alle</option>
      <% branches.each do |branch| %>
      <%= "<option value='#{branch.id}'>#{branch.name}</option>" %>
      <% end %>
    </select>
  </div>
</div>

<div class="row">
<div class="form-group">
  <label for="event_maintype_selector" class="main">Type/undertype:</label>
  <select id="event_maintype_selector" name="maintype_id">
    <option value="sum_all" data-subtype_name='sum_all' data-has_categories="true">Samlet</option>
    <option value="iterate_all" data-subtype_name='iterate_all' data-has_categories="false">Alle</option>
    <% event_maintypes.each do |type| %>
      <%= %Q(<option value='#{type.id}' data-subtype_name='#{type.name}'
      data-has_categories='#{type.has_categories?}'>#{type.label}</option>) %>
    <% end %>
  </select>
</div>


<div class="form-group">
  <div class='subtype_radio' id='sum_all'>
    <label class='radio-inline'><input type='radio' value='sum_all' name='subtype_id'>Samlet</label>
  </div>

  <div class='subtype_radio' id='iterate_all'>
    <label class='radio-inline'><input type='radio' value='sum_all' name='subtype_id'>Samlet</label>
    <label class='radio-inline'><input type='radio' value='iterate_all' name='subtype_id'>Alle</label>
  </div>

  <% event_maintypes.each do |type| %>
  <%= "<div class='subtype_radio' id='#{type.name}'>" %>
    <%= "<label class='radio-inline'><input type='radio' value='sum_all' name='subtype_id'>Samlet</label>" %>
    <%= "<label class='radio-inline'><input type='radio' value='iterate_all' name='subtype_id'>Alle</label>" %>
    <% type.event_types.each do |et| %>
    <%= %Q(<label class='radio-inline'><input type='radio' value='#{et.event_subtype.id}'
        name='subtype_id'>#{et.event_subtype.label}</label> ) %>
    <% end %>
    <%= "</div>" %>
  <% end %>
</div>
</div>


<div class="form-group row" id="category_row">
  <label for="category_selector" class="main">Kategori/underkategori:</label>
  <select id="category_selector" class="category_selector" name="category_id">
    <option value="none" hidden disabled>-</option>
    <option value="sum_all">Samlet</option>
    <option value="iterate_all">Alle</option>
    <% categories.each do |category| %>
    <%= "<option value='#{category.id}'>#{category.name}</option>" %>
    <% end %>
  </select>



  <select id="subcategory_selector" class="category_selector" name="subcategory_id">
    <option value="none">-</option>
    <option value="sum_all">Samlet</option>
    <option value="iterate_all">Alle</option>
    <% subcategories.each do |subcategory| %>
    <%= "<option value='#{subcategory.id}'>#{subcategory.name}</option>" %>
    <% end %>
  </select>

</div>



<div class="row">
  <div class="form-group">
    <button type="button" class="btn btn-secondary" id="submit">Hent</button>
    <button type="button" class="btn btn-secondary" id="clear">TÃ¸m liste</button>
  </div>
</div>

</form>

<div class="table-responsive">
  <table class="table table-striped" id="stats_table">
    <thead class="thead-inverse">
      <tr>
        <th>Periode</th>
        <th>Sted</th>
        <th>Kategori</th>
        <th>Barn/unge</th>
        <th>Voksne</th>
        <th>Samlet</th>
        <th>Ant. arr</th>
        <th>Type</th>
        <th>Undertype</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>
